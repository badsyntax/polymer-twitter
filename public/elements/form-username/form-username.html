<link rel="import" href="../../components/polymer/polymer.html">
<link rel="import" href="../../components/core-field/core-field.html">
<link rel="import" href="../../components/paper-input/paper-input.html">
<link rel="import" href="../../components/paper-button/paper-button.html">

<polymer-element name="form-username" attributes="method action username errors">
  <template>
    <link rel="stylesheet" href="css/form-username.css">
    <form id="form" method="{{method}}" action="{{action}}">
      <p class="help">Enter your twitter username below to view your stream:</p>
      <core-field>
        <paper-input
          id="username"
          validate="^[a-zA-Z0-9]+$"
          required
          on-keypress="{{keypressHandler}}"
          label="Username:"
          name="username"
          value="{{username}}"
          flex>
        </paper-input>
      </core-field>
      <core-field>
        <paper-button on-click="{{submitForm}}" raisedButton label="View tweets!"></paper-button>
      </core-field>
    </form>
  </template>
  <script>
  Polymer('form-username', {
    username: 'badsyntax',
    password: '',
    action: '',
    method: 'post',
    ready: function() {
      this.$.username.$.input.focus();

    },
    keypressHandler: function(e) {
      // enter key pressed
      if (e.keyCode === 13) this.submitForm();
    },
    submitForm: function() {

      if (this.$.username.invalid || !this.$.username.value.length) {
        this.$.username.invalid = true;
        this.$.username.$.input.focus();
        return;
      }

      this.fire('success', {
        username: this.username
      });
    }
  });
  </script>
</polymer-element>
